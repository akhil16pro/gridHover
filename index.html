<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grid Hover</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@500;600;700&family=Poppins:wght@200;300;400;500;900&family=Roboto:wght@100;300;400&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Roboto', sans-serif;
      }
    </style>
    <link
      rel="stylesheet"
      href="./scss/main.css?ver=5.6.3"
      type="text/css"
      media="all"
    />
  </head>
  <body>
    <main>
      <grid-list>
        <grid>
          <a href="#" class="inner">
            <div class="topBox">
              <div class="hoverEl"></div>
              <img src="./images/icon1.svg" loading="lazy" />
            </div>
            <div class="textBox">
              <p>
                It has survived not only five centuries, but also the leap into
                electronic typesetting, remaining essentially unchanged. It was
                popularised in the 1960s with the release of Letraset sheets
                containing
              </p>
            </div>
          </a>
        </grid>
        <grid>
          <a href="#" class="inner">
            <div class="topBox">
              <div class="hoverEl"></div>
              <img src="./images/icon2.svg" loading="lazy" />
            </div>
            <div class="textBox">
              <p>
                Many desktop publishing packages and web page editors now use
                Lorem Ipsum as their default model text, and a search for 'lorem
                ipsum' will uncover many web sites still in their infancy.
                Various versions have evolved over the years, sometimes by
                accident,
              </p>
            </div>
          </a>
        </grid>

        <grid>
          <a href="#" class="inner">
            <div class="topBox">
              <div class="hoverEl"></div>
              <img src="./images/icon3.svg" loading="lazy" />
            </div>
            <div class="textBox">
              <p>
                There are many variations of passages of Lorem Ipsum available,
                but the majority have suffered alteration in some form, by
                injected humour,
              </p>
            </div>
          </a>
        </grid>
        <grid>
          <a href="#" class="inner">
            <div class="topBox">
              <div class="hoverEl"></div>
              <img src="./images/icon4.svg" loading="lazy" />
            </div>
            <div class="textBox">
              <p>
                Making this the first true generator on the Internet. It uses a
                dictionary of over 200 Latin words, combined with a handful of
                model
              </p>
            </div>
          </a>
        </grid>
        <grid>
          <a href="#" class="inner">
            <div class="topBox">
              <div class="hoverEl"></div>
              <img src="./images/icon5.svg" loading="lazy" />
            </div>
            <div class="textBox">
              <p>
                The standard chunk of Lorem Ipsum used since the 1500s is
                reproduced below for those interested. Sections
              </p>
            </div>
          </a>
        </grid>
        <grid>
          <a href="#" class="inner">
            <div class="topBox">
              <div class="hoverEl"></div>
              <img src="./images/icon6.svg" loading="lazy" />
            </div>
            <div class="textBox">
              <p>
                All the Lorem Ipsum generators on the Internet tend to repeat
                predefined chunks as necessary, making this the first true
                generator on the Internet.
              </p>
            </div>
          </a>
        </grid>
      </grid-list>
    </main>
  </body>

  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"
    integrity="sha512-16esztaSRplJROstbIIdwX3N97V1+pZvV33ABoG1H2OyTttBxEGkTsoIVsiP1iaTtM8b3+hu2kB6pQ4Clr5yug=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>

  <script>
    const APG = {
      genRandonString: (length) => {
        let chars =
            'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
          charLength = chars.length,
          result = ''
        for (let i = 0; i < length; i++) {
          result += chars.charAt(Math.floor(Math.random() * charLength))
        }
        return result
      },
      grid: () => {
        let els = document.querySelectorAll('grid .topBox')
        let wd = window.innerWidth
        els.forEach((el) => {
          let textRandomEl = el.querySelector('.hoverEl')
          el.addEventListener('mouseenter', (e) => {
            el.classList.add('mActive')
            textRandomEl.innerHTML = APG.genRandonString(wd)
          })

          el.addEventListener('mouseleave', (e) => {
            //  textRandomEl.innerHTML = ''

            el.classList.remove('mActive')
          })

          el.addEventListener('mousemove', (e) => {
            el.style.setProperty('--x', e.offsetX + 'px')
            el.style.setProperty('--y', e.offsetY + 'px')

            textRandomEl.innerHTML = APG.genRandonString(wd)
          })
        })
      },
      moreBtn: () => {
        let more = document.querySelectorAll('[data-more]')

        more.forEach((btn) => {
          let elText = btn.querySelector('span').textContent,
            textArr = elText.split('')
          wd = btn.querySelector('span').getBoundingClientRect().width

          console.log(wd)
          //static button width setting
          btn.style.cssText = 'width:' + wd + 'px'

          btn.addEventListener('mouseenter', (e) => {
            e.preventDefault()
            let i = 0,
              tempSt = ''
            const wordBind = setInterval(() => {
              if (i < textArr.length) {
                tempSt += textArr[i]
                let tempText =
                  i == 0
                    ? APG.genRandonString(textArr.length)
                    : tempSt + APG.genRandonString(textArr.length - i - 1)
                btn.querySelector('span').innerHTML = tempText

                i++
              }
            }, 50)

            setTimeout(() => {
              btn.querySelector('span').innerHTML = elText
              clearInterval(wordBind)
            }, 600)
          })
        })
      },
    }

    setTimeout(() => {
      APG.moreBtn()
      APG.grid()
    }, 100)
  </script>
</html>
